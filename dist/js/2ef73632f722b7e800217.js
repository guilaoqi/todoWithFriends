(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{196:function(t,i,s){},205:function(t,i,s){"use strict";var e=s(196);s.n(e).a},224:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("mt-navbar",{model:{value:t.selected,callback:function(i){t.selected=i},expression:"selected"}},[s("mt-tab-item",{attrs:{id:"1"}},[t._v("我的工作")]),t._v(" "),s("mt-tab-item",{attrs:{id:"2"}},[t._v("发布的工作")])],1),t._v(" "),s("mt-tab-container",{model:{value:t.selected,callback:function(i){t.selected=i},expression:"selected"}},[s("mt-tab-container-item",{attrs:{id:"1"}},[t._l(t.missionToDo,function(i,e){return s("mt-cell-swipe",{key:i._id,attrs:{title:e+1+".  "+i.title,right:t.rightButtons(i._id),left:t.leftButtons(i._id)}},[s("span",{staticClass:"mui-icon mui-icon-more",attrs:{"data-id":i._id,"data-detail":i.detail,"data-title":i.title,"data-goaltime":i.goal_time,"data-addtime":i.add_time},on:{click:t.toggleDetail}})])}),t._v(" "),t.missionToConfirm.length?s("ul",{staticClass:"mui-table-view"},[s("li",{class:t.activeClassT?"mui-table-view-cell mui-collapse mui-active":"mui-table-view-cell mui-collapse"},[s("a",{staticClass:"mui-navigate-right",attrs:{href:"#"},on:{click:t.toggleClassT}},[t._v("新任务\n\t\t\t\t\t\t"),t.missionToConfirm.length?s("span",{staticClass:"mui-badge"},[t._v(t._s(t.missionToConfirm.length))]):t._e()]),t._v(" "),s("div",{staticClass:"mui-collapse-content"},t._l(t.missionToConfirm,function(i,e){return s("mt-cell",{key:i._id,attrs:{title:e+1+".  "+i.title}},[s("span",{staticStyle:{"margin-right":"15px"}},[t._v("from:"+t._s(i.user_name))]),s("mt-button",{attrs:{type:"primary",size:"small","data-id":i._id},on:{click:t.confirm}},[t._v("确认")])],1)}))])]):t._e(),t._v(" "),s("ul",{staticClass:"mui-table-view"},[s("li",{class:t.activeClassD?"mui-table-view-cell mui-collapse mui-active":"mui-table-view-cell mui-collapse"},[s("a",{staticClass:"mui-navigate-right",attrs:{href:"#"},on:{click:t.toggleClassD}},[t._v("已完成")]),t._v(" "),s("div",{staticClass:"mui-collapse-content"},t._l(t.missionDone,function(i,e){return s("mt-cell",{key:i._id,attrs:{title:e+1+".  "+i.title}},[s("span",{staticClass:"mui-icon mui-icon-close",on:{click:function(s){t.todelete(i._id)}}})])}))])])],2),t._v(" "),s("mt-tab-container-item",{attrs:{id:"2"}},[s("ul",{staticClass:"mui-table-view"},[s("li",{class:t.activeClass1?"mui-table-view-cell mui-collapse mui-active":"mui-table-view-cell mui-collapse"},[s("a",{staticClass:"mui-navigate-right",attrs:{href:"#"},on:{click:t.toggleClass1}},[t._v("进行中")]),t._v(" "),s("div",{staticClass:"mui-collapse-content"},t._l(t.missionOther1,function(i,e){return s("mt-cell",{key:i._id,attrs:{title:e+1+".  "+i.title}},[t._v(t._s(i.to_user)),s("span",{staticClass:"mui-icon mui-icon-close",on:{click:function(s){t.todelete(i._id)}}})])}))])]),t._v(" "),s("ul",{staticClass:"mui-table-view"},[s("li",{class:t.activeClass0?"mui-table-view-cell mui-collapse mui-active":"mui-table-view-cell mui-collapse"},[s("a",{staticClass:"mui-navigate-right",attrs:{href:"#"},on:{click:t.toggleClass0}},[t._v("待接收")]),t._v(" "),s("div",{staticClass:"mui-collapse-content"},t._l(t.missionOther0,function(i,e){return s("mt-cell",{key:i._id,attrs:{title:e+1+".  "+i.title}},[t._v(t._s(i.to_user)),s("span",{staticClass:"mui-icon mui-icon-close",on:{click:function(s){t.todelete(i._id)}}})])}))])]),t._v(" "),s("ul",{staticClass:"mui-table-view"},[s("li",{class:t.activeClass2?"mui-table-view-cell mui-collapse mui-active":"mui-table-view-cell mui-collapse"},[s("a",{staticClass:"mui-navigate-right",attrs:{href:"#"},on:{click:t.toggleClass2}},[t._v("已完成")]),t._v(" "),s("div",{staticClass:"mui-collapse-content"},t._l(t.missionOther2,function(i,e){return s("mt-cell",{key:i._id,attrs:{title:e+1+".  "+i.title}},[t._v(t._s(i.to_user)),s("span",{staticClass:"mui-icon mui-icon-close",on:{click:function(s){t.todelete(i._id)}}})])}))])])])],1),t._v(" "),t.showDeatil?s("div",{staticClass:"mint-popup mint-popup-1",staticStyle:{"z-index":"2001"}},[s("h4",[t._v(t._s(t.title))]),t._v(" "),s("h5",[t._v("备注:")]),s("p",[t._v(t._s(t.detail))]),t._v(" "),s("h5",[t._v("时间:")]),s("p",[t._v(t._s(t._f("format")(t.goal_time)))])]):t._e(),t._v(" "),t.showDeatil?s("div",{staticClass:"v-modal",staticStyle:{"z-index":"2000"},on:{click:t.toggleDetail}}):t._e()],1)};e._withStripped=!0;var a=s(7),l={data:function(){return{showDeatil:!1,selected:"1",activeClass0:0,activeClass1:!0,activeClass2:0,activeClassT:0,activeClassD:0,missionOther0:[],missionOther1:[],missionOther2:[],missionToConfirm:[],missionToDo:[],missionDone:[],title:"",detail:"",goal_time:"",add_time:""}},created:function(){var t=this;if(JSON.parse(window.localStorage.getItem("userdata"))){var i=JSON.parse(window.localStorage.getItem("userdata")).userid;this.$axios.get("mission/0").then(function(s){t.missionOther0=s.data.filter(function(t){return t.to_user_id!=i})}).catch(function(t){console.log(t)}),this.$axios.get("mission/1").then(function(s){t.missionOther1=s.data.filter(function(t){return t.to_user_id!=i})}).catch(function(t){console.log(t)}),this.$axios.get("mission/2").then(function(s){t.missionOther2=s.data.filter(function(t){return t.to_user_id!=i})}).catch(function(t){console.log(t)}),this.$axios.get("mission/mine/toconfirm").then(function(i){t.missionToConfirm=i.data,a.a.$emit("message",i.data.length)}),this.$axios.get("mission/mine/todo").then(function(i){t.missionToDo=i.data}),this.$axios.get("mission/mine/done").then(function(i){t.missionDone=i.data}).catch(function(t){console.log(t)})}else this.$router.push({name:"login"})},methods:{toggleDetail:function(t){this.title=t.target.dataset.title,this.detail=t.target.dataset.detail,this.goal_time=t.target.dataset.goaltime,this.add_time=t.target.dataset.addtime,this.showDeatil=!this.showDeatil},rightButtons:function(t){var i=this;return[{content:"删除",style:{background:"red",color:"#fff"},handler:function(){i.todelete(t)}}]},leftButtons:function(t){var i=this;return[{content:"完成",style:{background:"blue",color:"#fff"},handler:function(){i.$axios.post("mission/edit",{mission_ID:t,mission_state:2}).then(function(t){1===t.data.state&&i.$router.go(0)}).catch(function(t){console.log(t)})}}]},todelete:function(t){var i=this;this.$axios.post("mission/edit",{mission_ID:t,mission_state:3}).then(function(t){1===t.data.state&&i.$router.go(0)}).catch(function(t){console.log(t)})},toggleClass0:function(){this.activeClass0=!this.activeClass0},toggleClass1:function(){this.activeClass1=!this.activeClass1},toggleClass2:function(){this.activeClass2=!this.activeClass2},toggleClassT:function(){this.activeClassT=!this.activeClassT},toggleClassD:function(){this.activeClassD=!this.activeClassD},confirm:function(t){var i=this;this.$axios.post("mission/edit",{mission_ID:t.target.dataset.id,mission_state:1}).then(function(t){1===t.data.state&&i.$router.go(0)}).catch(function(t){console.log(t)})}}},o=(s(205),s(15)),n=Object(o.a)(l,e,[],!1,null,"7c66a6a2",null);n.options.__file="src/components/home/home.vue",i.default=n.exports}}]);