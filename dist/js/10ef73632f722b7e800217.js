(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{193:function(e,t,a){e.exports={default:a(194),__esModule:!0}},194:function(e,t,a){var n=a(195),s=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},195:function(e,t){var a=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=a)},204:function(e,t,a){},221:function(e,t,a){"use strict";var n=a(204);a.n(n).a},227:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("mt-search",{attrs:{"cancel-text":"取消",placeholder:"请输入对方电话搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.result,function(t){return a("mt-cell",{attrs:{title:t.username,value:t.value}},[e.show?a("span",{staticClass:"mui-icon mui-icon-plus",attrs:{"data-id":t.userid,"data-username":t.username},on:{click:e.Toadd}}):e._e()])}))],1)};n._withStripped=!0;var s=a(193),i=a.n(s),r={data:function(){return{show:!0,rightButtons:[],value:"",result:[],userdata:{},friendlistId:[],newfriends:[],waitfriendsId:[]}},methods:{submit:function(){var e=this;this.$axios.post("searchUser",{phonenum:this.value}).then(function(t){if(1===t.data.state){if(t.data.userid==e.userdata.userid)return void e.$messagebox("这是你自己号码");if(-1!=e.friendlistId.indexOf(t.data.userid))return void e.$messagebox(t.data.username+"-已经是你的好友了");if(-1!=e.newfriends.indexOf(t.data.userid))return void e.$messagebox(t.data.username+"-该好友已经向您发送好友申请,前往新朋友进行接收");if(-1!=e.waitfriendsId.indexOf(t.data.userid))return void e.$messagebox(t.data.username+"-您已经向该好友发送过申请了，请耐心等待");e.result=[{username:t.data.username,value:t.data.phonenum,userid:t.data.userid}],e.show=!0}else 0===t.data.state&&(e.show=!1,e.result=[{username:"该用户不存在，请重新搜索",value:null}])}).catch(function(e){console.log(e)})},Toadd:function(e){var t=this;this.$axios.post("sendRequest",{userid:e.target.dataset.id,username:e.target.dataset.username}).then(function(e){if(1===e.data.state)return t.$messagebox("添加请求已发送"),t.$axios.get("update")}).then(function(e){window.localStorage.setItem("userdata",i()(e.data)),t.$router.go(0)}).catch(function(e){console.log(e)})}},created:function(){var e=this;if(JSON.parse(window.localStorage.getItem("userdata"))){var t=JSON.parse(window.localStorage.getItem("userdata"));(this.userdata=t).friendlist.forEach(function(t,a){e.friendlistId.push(t.id)}),t.newfriends.forEach(function(t,a){e.newfriendsId.push(t.id)}),t.waitfriends.forEach(function(t,a){e.waitfriendsId.push(t.id)})}else this.$router.push({name:"login"})}},u=(a(221),a(15)),o=Object(u.a)(r,n,[],!1,null,null,null);o.options.__file="src/components/personal/partneradd.vue",t.default=o.exports}}]);